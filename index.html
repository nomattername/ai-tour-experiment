<!DOCTYPE html>
<html>
<head>
    <title>æ—…æ¸¸å’¨è¯¢</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#00B42A',
                        neutral: '#F5F5F5',
                        'neutral-dark': '#E5E5E5',
                        warning: '#FF7D00',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .chat-bubble-user {
                @apply bg-primary text-white rounded-tl-lg rounded-tr-lg rounded-bl-lg;
            }
            .chat-bubble-bot {
                @apply bg-neutral-dark text-gray-800 rounded-tl-lg rounded-tr-lg rounded-br-lg;
            }
            .typing-indicator {
                @apply flex space-x-1 animate-pulse;
            }
            .typing-dot {
                @apply w-2 h-2 bg-gray-400 rounded-full;
            }
            .countdown {
                @apply bg-warning/10 border border-warning/30 text-warning px-3 py-1 rounded-full text-sm inline-block;
            }
            .option-button {
                @apply w-full bg-white border border-primary/30 text-primary hover:bg-primary/5 rounded-lg py-2 px-4 text-left mb-2 transition-colors;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans">
    <div id="scenario-page" class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center p-6">
        <div class="max-w-md w-full">
            <div class="text-center mb-6">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">æ—…æ¸¸å’¨è¯¢</h1>
                <p class="text-gray-600">ä¸å®¢æœå¯¹è¯è·å–è¡Œç¨‹å»ºè®®</p>
            </div>
            
            <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded">
                <p class="text-gray-700">
                    <strong>æƒ…å¢ƒ:</strong> æ‚¨æ­£åœ¨è®¡åˆ’ä¸€åœºä»åŒ—äº¬å‡ºå‘ä¸ºæœŸä¸‰å¤©çš„æ—…ç¨‹ï¼Œç”±äºæ—¶é—´ç´§å¼ ï¼Œæ‚¨å¿…é¡»åœ¨ä»Šå¤©ä¹‹å†…å†³å®šæ—…æ¸¸ç›®çš„åœ°å¹¶å®Œæˆå¤§è‡´è¡Œç¨‹å®‰æ’ã€‚ä¸ºäº†é«˜æ•ˆå†³ç­–ï¼Œå¹¶äº†è§£ç›¸å…³çš„æ—…æ¸¸èµ„è®¯ï¼Œæ‚¨æ‰“å¼€æ—…æ¸¸å¹³å°ï¼Œè¿›å…¥å®¢æœå’¨è¯¢ç•Œé¢ã€‚
                </p>
            </div>
            
            <div class="bg-warning/10 border border-warning/30 text-warning p-4 mb-6 rounded">
                <p class="text-gray-700 font-medium">
                    <i class="fa fa-clock-o mr-2"></i>æ—¶é—´ç´§è¿«ï¼šè¯·å°½å¿«åšå‡ºå†³ç­–ï¼Œä»¥å…è€½è¯¯è¡Œç¨‹ï¼
                </p>
            </div>
            
            <button id="start-chat" class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-4 rounded-lg transition duration-300 ease-in-out">
                å¼€å§‹å¯¹è¯
            </button>
        </div>
    </div>

    <div id="phone-container" class="fixed inset-0 bg-gray-900/80 z-40 flex items-center justify-center p-4 hidden">
        <div class="relative bg-white rounded-3xl shadow-2xl w-full max-w-xs overflow-hidden border-8 border-gray-800">
            <!-- æ‰‹æœºé¡¶éƒ¨çŠ¶æ€æ  -->
            <div class="bg-gray-800 text-white text-xs flex items-center justify-between px-4 py-1.5">
                <span>9:41 AM</span>
                <div class="flex items-center space-x-1">
                    <i class="fa fa-signal"></i>
                    <i class="fa fa-wifi"></i>
                    <i class="fa fa-battery-three-quarters"></i>
                </div>
            </div>
            
            <!-- èŠå¤©åº”ç”¨æ ‡é¢˜æ  -->
            <div class="bg-primary text-white py-3 px-4 flex items-center">
                <i class="fa fa-arrow-left mr-3 cursor-pointer" id="back-button"></i>
                <div>
                    <h2 class="font-medium">AIå°æ—…</h2>
                    <p class="text-xs opacity-80">æ™ºèƒ½æ—…æ¸¸åŠ©æ‰‹</p>
                </div>
                <div class="ml-auto">
                    <span class="countdown"><i class="fa fa-clock-o mr-1"></i>24å°æ—¶å†…</span>
                </div>
            </div>
            
            <!-- èŠå¤©å†…å®¹åŒºåŸŸ -->
            <div id="chat-container" class="h-[calc(100vh-280px)] max-h-[500px] overflow-y-auto p-4 bg-gray-50 flex flex-col">
                <!-- èŠå¤©å†…å®¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
            </div>
            
            <!-- é€‰é¡¹æŒ‰é’®åŒºåŸŸï¼ˆæ›¿ä»£åŸè¾“å…¥æ¡†ï¼‰ -->
            <div id="options-container" class="border-t border-gray-200 p-3">
                <!-- é€‰é¡¹æŒ‰é’®å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <script>
        // å¯¹è¯æ•°æ®ï¼šæ¯ä¸ªæ­¥éª¤åŒ…å«ç”¨æˆ·å¯é€‰çš„æ¶ˆæ¯å’Œå¯¹åº”çš„AIå›å¤
        const conversations = [
            {
                userOptions: [], // åˆå§‹AIé—®å€™åæ— é€‰é¡¹ï¼Œç›´æ¥æ˜¾ç¤ºç¬¬ä¸€æ­¥é€‰é¡¹
                botReply: 'æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ‚¨çš„AIæ—…æ¸¸åŠ©æ‰‹â€œå°æ—…â€ğŸ¤–ï¼Œå¯ä»¥ä¸ºæ‚¨æ¨èé€‚åˆçš„ç›®çš„åœ°ã€è¡Œç¨‹ä¸ä½å®¿å®‰æ’ï¼Œ<br>ä¹Ÿèƒ½æä¾›æœºé…’é¢„è®¢ã€è¡Œç¨‹è§„åˆ’ã€ç¾é£Ÿæ”»ç•¥ç­‰æœåŠ¡ï¼Œè¯·é—®æ‚¨æœ‰ä»€ä¹ˆéœ€æ±‚ï¼Ÿ'
            },
            {
                userOptions: ['æˆ‘äººåœ¨åŒ—äº¬ï¼Œæœ€è¿‘æœ‰ä¸‰å¤©å‡æœŸï¼Œæƒ³å‡ºå»æ—…æ¸¸ä¸€ä¸‹ï¼Œä½†æ˜¯ä¸çŸ¥é“å»å“ªç©ï¼Œä½ æœ‰ä»€ä¹ˆæ¨èå—ï¼Ÿ'],
                botReply: 'å¥½çš„ï½ä¸‰å¤©æ—¶é—´ä»åŒ—äº¬å‡ºå‘ï¼Œæˆ‘å¯ä»¥ä¸ºæ‚¨æ¨èå‡ æ¡çƒ­é—¨è·¯çº¿ ğŸ˜Šè¯·é—®æ‚¨æ˜¯æ‰“ç®—ç‹¬è‡ªå‡ºè¡Œï¼Œè¿˜æ˜¯å’Œå®¶äººæˆ–æœ‹å‹ä¸€èµ·ï¼Ÿ'
            },
            {
                userOptions: ['ä¸¤ä¸ªäººï¼Œæœ‹å‹ã€‚'],
                botReply: 'äº†è§£äº†ï¼Œé‚£æˆ‘æ¨èä»¥ä¸‹å‡ ä¸ªç›®çš„åœ°ä¾›æ‚¨é€‰æ‹©ï¼š1. ğŸ–ï¸ é’å²›ï¼šæµ·è¾¹åŸå¸‚ï¼Œé€‚åˆæ”¾æ¾å’Œç¾é£Ÿä¹‹æ—…ï¼Œä¸‰å¤©è¶³å¤Ÿå®‰æ’åƒå–ç©ä¹ã€‚<br>2. ğŸ¯ æ‰¿å¾·ï¼šå¯ä»¥å‚è§‚é¿æš‘å±±åº„ã€ä½“éªŒæ¸…ä»£çš‡å®¶æ–‡åŒ–ï¼ŒèŠ‚å¥è½»æ¾ã€‚<br>3. ğŸ™ï¸ è¥¿å®‰ï¼šå†å²æ°”æ¯æµ“åšï¼Œå…µé©¬ä¿‘ã€å¤§å”ä¸å¤œåŸç­‰éƒ½å¾ˆé€‚åˆçŸ­æœŸæ–‡åŒ–æ¸¸ã€‚'
            },
            {
                userOptions: ['æˆ‘ä»¬ä¸æƒ³å¤ªèµ¶è·¯ï¼Œæœ€å¥½é«˜é“ä¸‰ä¸ªå°æ—¶ä»¥å†…å°±èƒ½åˆ°çš„ã€‚'],
                botReply: 'æ˜ç™½ï½é‚£é’å²›å’Œæ‰¿å¾·æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©ï¼Œéƒ½æœ‰é«˜é“ç›´è¾¾ï¼Œ3å°æ—¶å†…å¯è¾¾ğŸš„æ‚¨æ›´åå¥½çœ‹æµ·ã€é€›å¸‚åŒºï¼Œè¿˜æ˜¯æƒ³èµ°æ–‡è‰ºè·¯çº¿ï¼Ÿ'
            },
            {
                userOptions: ['åä¼‘é—²ä¸€ç‚¹ï¼Œæœ‰åƒçš„æœ‰æ™¯ç‚¹å°±å¥½ã€‚'],
                botReply: 'é‚£æˆ‘å»ºè®®é¦–é€‰é’å²›ã€‚æ¨èè·¯çº¿å¦‚ä¸‹ï¼š<br>ç¬¬ä¸€å¤©ï¼šç«è½¦åˆ°è¾¾ï¼Œæ ˆæ¡¥ã€æµ·è¾¹æ­¥è¡Œè¡—æ•£æ­¥ï¼›<br>ç¬¬äºŒå¤©ï¼šå…«å¤§å…³ã€å°é±¼å±±ï¼Œæ™šä¸Šåœ¨å°ä¸œå¤œå¸‚å°æµ·é²œï¼›<br>ç¬¬ä¸‰å¤©ï¼šä¿¡å·å±±ã€é’å²›å•¤é…’åšç‰©é¦†ï¼Œç„¶åè¿”å›ã€‚'
            },
            {
                userOptions: ['ä¸é”™ä¸é”™ï¼ä½å®¿æœ‰ä»€ä¹ˆæ¨èå—ï¼Ÿ'],
                botReply: ' ğŸ¨ é’å²›æµ·æ™¯å…¬å¯“ï¼šÂ¥450/æ™šï¼Œé è¿‘æ ˆæ¡¥ï¼Œé€‚åˆæœ‹å‹ç»“ä¼´ï¼›<br> ğŸ›ï¸ å°ä¸œå¿«æ·é…’åº—ï¼šÂ¥320/æ™šï¼Œå‘¨å›´åƒå–æ–¹ä¾¿ï¼›<br>ğŸ¡ æ°‘å®¿ç²¾é€‰ï¼šÂ¥480/æ™šï¼Œæœ‰äº›æ˜¯å¸¦é˜³å°æµ·æ™¯æˆ¿å“¦ï½'
            },
            {
                userOptions: ['æˆ‘ä»¬æ¯”è¾ƒå–œæ¬¢ä½å¾—èˆ’æœä¸€ç‚¹çš„ã€‚'],
                botReply: 'é‚£æˆ‘å»ºè®®é€‰æ‹©é’å²›æµ·æ™¯å…¬å¯“ï¼Œä½ç½®å¥½ã€è¯„ä»·é«˜ï¼Œå¾ˆå¤šå¹´è½»äººé€‰æ‹©è¿™é‡Œï½æ˜¯å¦éœ€è¦æˆ‘å¸®æ‚¨é¢„çº¦ï¼Ÿ'
            },
            {
                userOptions: ['æˆ‘ä»¬è¿˜è¦å†è€ƒè™‘ä¸€ä¸‹ï¼Œä¸è¿‡è°¢è°¢ä½ æ¨èå¾—è¿™ä¹ˆè¯¦ç»†ã€‚'],
                botReply: 'ä¸å®¢æ°”ï½å¦‚æœåç»­éœ€è¦æŸ¥è¯¢ç«è½¦ç¥¨ã€é…’åº—ç©ºæˆ¿æˆ–æ›´å¤šæ¨èï¼Œæˆ‘éƒ½å¯ä»¥å¸®å¿™ã€‚ç¥æ‚¨å‡æœŸæ„‰å¿«å“¦ï¼ğŸ’ğŸŒ¤ï¸'
            },
            {
                userOptions: [], // æœ€åä¸€æ­¥æ— é€‰é¡¹
                botReply: ''
            }
        ];

        let currentStep = 0;
        const chatContainer = document.getElementById('chat-container');
        const optionsContainer = document.getElementById('options-container');
        const scenarioPage = document.getElementById('scenario-page');
        const phoneContainer = document.getElementById('phone-container');
        const startChatButton = document.getElementById('start-chat');
        const backButton = document.getElementById('back-button');

        // åˆå§‹åŒ–å¯¹è¯ï¼šæ˜¾ç¤ºAIåˆå§‹é—®å€™
        function startConversation() {
            currentStep = 0;
            chatContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            showBotReply(); // æ˜¾ç¤ºå½“å‰æ­¥éª¤çš„AIå›å¤
        }

        // æ˜¾ç¤ºAIå›å¤
        function showBotReply() {
            if (currentStep >= conversations.length) return;

            const botMessage = conversations[currentStep].botReply;
            if (!botMessage) {
                // æœ€åä¸€æ­¥AIæ— å›å¤ï¼Œéšè—é€‰é¡¹
                optionsContainer.innerHTML = '';
                return;
            }

            // æ·»åŠ AIå›å¤åˆ°èŠå¤©æ¡†
            const messageDiv = document.createElement('div');
            messageDiv.className = `my-2 mr-auto max-w-[80%]`;
            messageDiv.innerHTML = `
                <div class="flex items-end">
                    <div class="chat-bubble-bot p-3 shadow-sm">
                        <p>${botMessage}</p>
                    </div>
                </div>
            `;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            // å»¶è¿Ÿæ˜¾ç¤ºç”¨æˆ·é€‰é¡¹ï¼ˆæ¨¡æ‹Ÿæ€è€ƒæ—¶é—´ï¼‰
            setTimeout(() => {
                showUserOptions();
            }, 1000);
        }

        // æ˜¾ç¤ºç”¨æˆ·å¯é€‰çš„æ¶ˆæ¯æŒ‰é’®
        function showUserOptions() {
            if (currentStep >= conversations.length - 1) return;

            const nextStep = currentStep + 1;
            const userOptions = conversations[nextStep].userOptions;
            optionsContainer.innerHTML = ''; // æ¸…ç©ºä¹‹å‰çš„é€‰é¡¹

            if (userOptions.length === 0) {
                // å¦‚æœæ²¡æœ‰é€‰é¡¹ï¼Œè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€æ­¥ï¼ˆä»…åˆå§‹æ­¥éª¤ç”¨ï¼‰
                currentStep++;
                setTimeout(showBotReply, 500);
                return;
            }

            // ç”Ÿæˆé€‰é¡¹æŒ‰é’®
            userOptions.forEach(optionText => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.textContent = optionText;
                button.addEventListener('click', () => {
                    // ç‚¹å‡»åå‘é€ç”¨æˆ·æ¶ˆæ¯
                    sendUserMessage(optionText);
                    // éšè—é€‰é¡¹æŒ‰é’®
                    optionsContainer.innerHTML = '';
                    // è¿›å…¥ä¸‹ä¸€æ­¥
                    currentStep = nextStep;
                    // å»¶è¿Ÿæ˜¾ç¤ºAIå›å¤
                    setTimeout(showBotReply, 1000);
                });
                optionsContainer.appendChild(button);
            });
        }

        // å‘é€ç”¨æˆ·æ¶ˆæ¯ï¼ˆæ˜¾ç¤ºåœ¨èŠå¤©æ¡†ï¼‰
        function sendUserMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `my-2 ml-auto max-w-[80%]`;
            messageDiv.innerHTML = `
                <div class="flex items-end flex-row-reverse">
                    <div class="chat-bubble-user p-3 shadow-sm">
                        <p>${text}</p>
                    </div>
                </div>
            `;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // äº‹ä»¶ç›‘å¬ï¼šå¼€å§‹å¯¹è¯
        startChatButton.addEventListener('click', () => {
            scenarioPage.classList.add('hidden');
            phoneContainer.classList.remove('hidden');
            setTimeout(startConversation, 300);
        });

        // äº‹ä»¶ç›‘å¬ï¼šè¿”å›æŒ‰é’®
        backButton.addEventListener('click', () => {
            phoneContainer.classList.add('hidden');
            scenarioPage.classList.remove('hidden');
        });
    </script>
</body>
</html>
