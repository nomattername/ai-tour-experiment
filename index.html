<!DOCTYPE html>
<html>
<head>
    <title>æ—…æ¸¸å’¨è¯¢</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#00B42A',
                        neutral: '#F5F5F5',
                        'neutral-dark': '#E5E5E5',
                        warning: '#FF7D00',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .chat-bubble-user {
                @apply bg-primary text-white rounded-tl-lg rounded-tr-lg rounded-bl-lg;
            }
            .chat-bubble-bot {
                @apply bg-neutral-dark text-gray-800 rounded-tl-lg rounded-tr-lg rounded-br-lg;
            }
            .typing-indicator {
                @apply flex space-x-1 animate-pulse;
            }
            .typing-dot {
                @apply w-2 h-2 bg-gray-400 rounded-full;
            }
            .countdown {
                @apply bg-warning/10 border border-warning/30 text-warning px-3 py-1 rounded-full text-sm inline-block;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans">
    <div id="scenario-page" class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center p-6">
        <div class="max-w-md w-full">
            <div class="text-center mb-6">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">æ—…æ¸¸å’¨è¯¢</h1>
                <p class="text-gray-600">ä¸å®¢æœå¯¹è¯è·å–è¡Œç¨‹å»ºè®®</p>
            </div>
            
            <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded">
                <p class="text-gray-700">
                    <strong>æƒ…å¢ƒ:</strong> æ‚¨æ­£åœ¨è®¡åˆ’ä¸€åœºä»åŒ—äº¬å‡ºå‘ä¸ºæœŸä¸‰å¤©çš„æ—…ç¨‹ï¼Œç”±äºæ—¶é—´ç´§å¼ ï¼Œæ‚¨å¿…é¡»åœ¨ä»Šå¤©ä¹‹å†…å†³å®šæ—…æ¸¸ç›®çš„åœ°å¹¶å®Œæˆå¤§è‡´è¡Œç¨‹å®‰æ’ã€‚ä¸ºäº†é«˜æ•ˆå†³ç­–ï¼Œå¹¶äº†è§£ç›¸å…³çš„æ—…æ¸¸èµ„è®¯ï¼Œæ‚¨æ‰“å¼€æ—…æ¸¸å¹³å°ï¼Œè¿›å…¥å®¢æœå’¨è¯¢ç•Œé¢ã€‚
                </p>
            </div>
            
            <div class="bg-warning/10 border border-warning/30 text-warning p-4 mb-6 rounded">
                <p class="text-gray-700 font-medium">
                    <i class="fa fa-clock-o mr-2"></i>æ—¶é—´ç´§è¿«ï¼šè¯·å°½å¿«åšå‡ºå†³ç­–ï¼Œä»¥å…è€½è¯¯è¡Œç¨‹ï¼
                </p>
            </div>
            
            <button id="start-chat" class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-4 rounded-lg transition duration-300 ease-in-out">
                å¼€å§‹å¯¹è¯
            </button>
        </div>
    </div>

    <div id="phone-container" class="fixed inset-0 bg-gray-900/80 z-40 flex items-center justify-center p-4 hidden">
        <div class="relative bg-white rounded-3xl shadow-2xl w-full max-w-xs overflow-hidden border-8 border-gray-800">
            <!-- æ‰‹æœºé¡¶éƒ¨çŠ¶æ€æ  -->
            <div class="bg-gray-800 text-white text-xs flex items-center justify-between px-4 py-1.5">
                <span>9:41 AM</span>
                <div class="flex items-center space-x-1">
                    <i class="fa fa-signal"></i>
                    <i class="fa fa-wifi"></i>
                    <i class="fa fa-battery-three-quarters"></i>
                </div>
            </div>
            
            <!-- èŠå¤©åº”ç”¨æ ‡é¢˜æ  -->
            <div class="bg-primary text-white py-3 px-4 flex items-center">
                <i class="fa fa-arrow-left mr-3 cursor-pointer"></i>
                <div>
                    <h2 class="font-medium">AIå°æ—…</h2>
                    <p class="text-xs opacity-80">æ™ºèƒ½æ—…æ¸¸åŠ©æ‰‹</p>
                </div>
                <div class="ml-auto">
                    <span class="countdown"><i class="fa fa-clock-o mr-1"></i>24å°æ—¶å†…</span>
                </div>
            </div>
            
            <!-- èŠå¤©å†…å®¹åŒºåŸŸ -->
            <div id="chat-container" class="h-[calc(100vh-240px)] max-h-[500px] overflow-y-auto p-4 bg-gray-50 flex flex-col">
                <!-- èŠå¤©å†…å®¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
            </div>
            
            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="border-t border-gray-200 p-3 flex items-center">
                <button class="text-gray-500 mr-2">
                    <i class="fa fa-plus-circle text-xl"></i>
                </button>
                <div class="relative flex-grow">
                    <input type="text" id="message-input" placeholder="è¾“å…¥æ¶ˆæ¯..." class="w-full py-2 px-4 rounded-full bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary/30">
                    <button id="send-button" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-primary">
                        <i class="fa fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å¯¹è¯å†…å®¹
        const conversations = [
            { user: 'æˆ‘äººåœ¨åŒ—äº¬ï¼Œæœ€è¿‘æœ‰ä¸‰å¤©å‡æœŸï¼Œæƒ³å‡ºå»æ—…æ¸¸ä¸€ä¸‹ï¼Œä½†æ˜¯ä¸çŸ¥é“å»å“ªç©ï¼Œä½ æœ‰ä»€ä¹ˆæ¨èå—ï¼Ÿ', bot: 'å¥½çš„ï½ä¸‰å¤©æ—¶é—´ä»åŒ—äº¬å‡ºå‘ï¼Œæˆ‘å¯ä»¥ä¸ºæ‚¨æ¨èå‡ æ¡çƒ­é—¨è·¯çº¿ ğŸ˜Šè¯·é—®æ‚¨æ˜¯æ‰“ç®—ç‹¬è‡ªå‡ºè¡Œï¼Œè¿˜æ˜¯å’Œå®¶äººæˆ–æœ‹å‹ä¸€èµ·ï¼Ÿ' },
            { user: 'ä¸¤ä¸ªäººï¼Œæœ‹å‹ã€‚', bot: 'äº†è§£äº†ï¼Œé‚£æˆ‘æ¨èä»¥ä¸‹å‡ ä¸ªç›®çš„åœ°ä¾›æ‚¨é€‰æ‹©ï¼š1. ğŸ–ï¸ é’å²›ï¼šæµ·è¾¹åŸå¸‚ï¼Œé€‚åˆæ”¾æ¾å’Œç¾é£Ÿä¹‹æ—…ï¼Œä¸‰å¤©è¶³å¤Ÿå®‰æ’åƒå–ç©ä¹ã€‚<br>2. ğŸ¯ æ‰¿å¾·ï¼šå¯ä»¥å‚è§‚é¿æš‘å±±åº„ã€ä½“éªŒæ¸…ä»£çš‡å®¶æ–‡åŒ–ï¼ŒèŠ‚å¥è½»æ¾ã€‚<br>3. ğŸ™ï¸ è¥¿å®‰ï¼šå†å²æ°”æ¯æµ“åšï¼Œå…µé©¬ä¿‘ã€å¤§å”ä¸å¤œåŸç­‰éƒ½å¾ˆé€‚åˆçŸ­æœŸæ–‡åŒ–æ¸¸ã€‚' },
            { user: 'æˆ‘ä»¬ä¸æƒ³å¤ªèµ¶è·¯ï¼Œæœ€å¥½é«˜é“ä¸‰ä¸ªå°æ—¶ä»¥å†…å°±èƒ½åˆ°çš„ã€‚', bot: 'æ˜ç™½ï½é‚£é’å²›å’Œæ‰¿å¾·æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©ï¼Œéƒ½æœ‰é«˜é“ç›´è¾¾ï¼Œ3å°æ—¶å†…å¯è¾¾ğŸš„æ‚¨æ›´åå¥½çœ‹æµ·ã€é€›å¸‚åŒºï¼Œè¿˜æ˜¯æƒ³èµ°æ–‡è‰ºè·¯çº¿ï¼Ÿ' },
            { user: 'åä¼‘é—²ä¸€ç‚¹ï¼Œæœ‰åƒçš„æœ‰æ™¯ç‚¹å°±å¥½ã€‚', bot: 'é‚£æˆ‘å»ºè®®é¦–é€‰é’å²›ã€‚æ¨èè·¯çº¿å¦‚ä¸‹ï¼š<br>ç¬¬ä¸€å¤©ï¼šç«è½¦åˆ°è¾¾ï¼Œæ ˆæ¡¥ã€æµ·è¾¹æ­¥è¡Œè¡—æ•£æ­¥ï¼›<br>ç¬¬äºŒå¤©ï¼šå…«å¤§å…³ã€å°é±¼å±±ï¼Œæ™šä¸Šåœ¨å°ä¸œå¤œå¸‚å°æµ·é²œï¼›<br>ç¬¬ä¸‰å¤©ï¼šä¿¡å·å±±ã€é’å²›å•¤é…’åšç‰©é¦†ï¼Œç„¶åè¿”å›ã€‚' },
            { user: 'ä¸é”™ä¸é”™ï¼ä½å®¿æœ‰ä»€ä¹ˆæ¨èå—ï¼Ÿ', bot: ' ğŸ¨ é’å²›æµ·æ™¯å…¬å¯“ï¼šÂ¥450/æ™šï¼Œé è¿‘æ ˆæ¡¥ï¼Œé€‚åˆæœ‹å‹ç»“ä¼´ï¼›<br> ğŸ›ï¸ å°ä¸œå¿«æ·é…’åº—ï¼šÂ¥320/æ™šï¼Œå‘¨å›´åƒå–æ–¹ä¾¿ï¼›<br>ğŸ¡ æ°‘å®¿ç²¾é€‰ï¼šÂ¥480/æ™šï¼Œæœ‰äº›æ˜¯å¸¦é˜³å°æµ·æ™¯æˆ¿å“¦ï½' },
            { user: 'æˆ‘ä»¬æ¯”è¾ƒå–œæ¬¢ä½å¾—èˆ’æœä¸€ç‚¹çš„ã€‚', bot: 'é‚£æˆ‘å»ºè®®é€‰æ‹©é’å²›æµ·æ™¯å…¬å¯“ï¼Œä½ç½®å¥½ã€è¯„ä»·é«˜ï¼Œå¾ˆå¤šå¹´è½»äººé€‰æ‹©è¿™é‡Œï½æ˜¯å¦éœ€è¦æˆ‘å¸®æ‚¨é¢„çº¦ï¼Ÿ' },
            { user: 'æˆ‘ä»¬è¿˜è¦å†è€ƒè™‘ä¸€ä¸‹ï¼Œä¸è¿‡è°¢è°¢ä½ æ¨èå¾—è¿™ä¹ˆè¯¦ç»†ã€‚', bot: 'ä¸å®¢æ°”ï½å¦‚æœåç»­éœ€è¦æŸ¥è¯¢ç«è½¦ç¥¨ã€é…’åº—ç©ºæˆ¿æˆ–æ›´å¤šæ¨èï¼Œæˆ‘éƒ½å¯ä»¥å¸®å¿™ã€‚ç¥æ‚¨å‡æœŸæ„‰å¿«å“¦ï¼ğŸ’ğŸŒ¤ï¸' }
        ];

        let currentStep = 0;
        const chatContainer = document.getElementById('chat-container');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const scenarioPage = document.getElementById('scenario-page');
        const phoneContainer = document.getElementById('phone-container');
        const startChatButton = document.getElementById('start-chat');

        // æ˜¾ç¤ºåˆå§‹é—®å€™
          function showInitialGreeting() {
              const messageDiv = document.createElement('div');
              messageDiv.className = `my-2 mr-auto max-w-[80%]`;
              messageDiv.innerHTML = `
                  <div class="flex items-end">
                      <div class="chat-bubble-bot p-3 shadow-sm">
                          <p>æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ‚¨çš„AIæ—…æ¸¸åŠ©æ‰‹â€œå°æ—…â€ğŸ¤–ï¼Œå¯ä»¥ä¸ºæ‚¨æ¨èé€‚åˆçš„ç›®çš„åœ°ã€è¡Œç¨‹ä¸ä½å®¿å®‰æ’ï¼Œ\nä¹Ÿèƒ½æä¾›æœºé…’é¢„è®¢ã€è¡Œç¨‹è§„åˆ’ã€ç¾é£Ÿæ”»ç•¥ç­‰æœåŠ¡ï¼Œè¯·é—®æ‚¨æœ‰ä»€ä¹ˆéœ€æ±‚ï¼Ÿ</p>
                      </div>
                  </div>
              `;
              chatContainer.appendChild(messageDiv);
              chatContainer.scrollTop = chatContainer.scrollHeight;
              // ç›´æ¥è°ƒç”¨ä¸‹ä¸€æ¡æ¶ˆæ¯
              setTimeout(() => {
                  showNextMessage();
              }, 1000);
          }

          // æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©ç•Œé¢
          function addMessage(sender, message, isLast = false) {
              const messageDiv = document.createElement('div');
              messageDiv.className = `my-2 ${sender === 'user' ? 'ml-auto' : 'mr-auto'} max-w-[80%]`;
              
              let bubbleClass = sender === 'user' ? 'chat-bubble-user' : 'chat-bubble-bot';
              
              // ç§»é™¤å¤´åƒ
              messageDiv.innerHTML = `
                  <div class="flex items-end ${sender === 'user' ? 'flex-row-reverse' : 'flex-row'}">
                      <div class="${bubbleClass} p-3 shadow-sm">
                          <p>${message}</p>
                      </div>
                  </div>
              `;
              
              // æ·»åŠ æ‰“å­—æŒ‡ç¤ºå™¨æ¨¡æ‹ŸåŠ è½½æ•ˆæœ
              if (sender === 'user') {
                  addTypingIndicator();
                  setTimeout(() => {
                      removeTypingIndicator();
                      chatContainer.appendChild(messageDiv);
                      chatContainer.scrollTop = chatContainer.scrollHeight;
                  }, 500); // ç”¨æˆ·æ¶ˆæ¯åŠ è½½å»¶è¿Ÿç¼©çŸ­ä¸º500ms
              } else if (sender === 'bot') {
                  addTypingIndicator();
                  setTimeout(() => {
                      removeTypingIndicator();
                      chatContainer.appendChild(messageDiv);
                      chatContainer.scrollTop = chatContainer.scrollHeight;
                  }, 1000); // å®¢æœæ¶ˆæ¯åŠ è½½å»¶è¿Ÿç¼©çŸ­ä¸º1000ms
              }
        }

        // æ·»åŠ æ‰“å­—æŒ‡ç¤ºå™¨
        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'my-2 mr-auto max-w-[80%]';
            typingDiv.id = 'typing-indicator';
            // ç§»é™¤å¤´åƒ
            typingDiv.innerHTML = `
                <div class="flex items-end">
                    <div class="chat-bubble-bot p-3 shadow-sm">
                        <div class="typing-indicator">
                            <span class="typing-dot"></span>
                            <span class="typing-dot"></span>
                            <span class="typing-dot"></span>
                        </div>
                    </div>
                </div>
            `;
            
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // ç§»é™¤æ‰“å­—æŒ‡ç¤ºå™¨
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // æ˜¾ç¤ºä¸‹ä¸€æ¡æ¶ˆæ¯
        function showNextMessage() {
            if (currentStep < conversations.length) {
                const conversation = conversations[currentStep];
                
                if (conversation.user) {
                    addMessage('user', conversation.user);
                    // æ·»åŠ å»¶è¿Ÿï¼Œç¡®ä¿ç”¨æˆ·æ¶ˆæ¯æ˜¾ç¤ºåå†æ˜¾ç¤º bot æ¶ˆæ¯
                    setTimeout(() => {
                        if (conversation.bot) {
                            // æ£€æŸ¥æ˜¯å¦æ˜¯æœ€åä¸€æ¡æ¶ˆæ¯
                            const isLast = currentStep === conversations.length - 1;
                            addMessage('bot', conversation.bot, isLast);
                            // æ·»åŠ å»¶è¿Ÿï¼Œç¡®ä¿ä¸€è½®å¯¹è¯å®Œæˆåå†è¿›è¡Œä¸‹ä¸€è½®
                            setTimeout(() => {
                                currentStep++;
                                showNextMessage();
                            }, 1750); // å¢åŠ å»¶è¿Ÿæ—¶é—´
                        } else {
                            currentStep++;
                            showNextMessage();
                        }
                    }, 1500); // å¢åŠ å»¶è¿Ÿæ—¶é—´
                } else if (conversation.bot) {
                    addMessage('bot', conversation.bot);
                    // æ·»åŠ å»¶è¿Ÿï¼Œç¡®ä¿ä¸€è½®å¯¹è¯å®Œæˆåå†è¿›è¡Œä¸‹ä¸€è½®
                    setTimeout(() => {
                        currentStep++;
                        showNextMessage();
                    }, 1500); // å¢åŠ å»¶è¿Ÿæ—¶é—´
                }
            }
        }

        // å¤„ç†ç”¨æˆ·è¾“å…¥
        function handleUserInput() {
            const message = messageInput.value.trim();
            if (message) {
                addMessage('user', message);
                messageInput.value = '';
            }
        }

        // äº‹ä»¶ç›‘å¬
        sendButton.addEventListener('click', handleUserInput);
        
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleUserInput();
            }
        });
        
        startChatButton.addEventListener('click', () => {
            scenarioPage.classList.add('hidden');
            phoneContainer.classList.remove('hidden');
            setTimeout(() => {
                showInitialGreeting();
            }, 100); // æ·»åŠ  100 æ¯«ç§’å»¶è¿Ÿï¼Œè®©é—®å€™è¯­é—ªå‡ºå‰æœ‰ä¸€ç‚¹æ—¶é—´
        });
    </script>
</body>
</html>
